CREATE TABLE IF NOT EXISTS dim_ssga_fund (
  ssga_fund_base_id BIGINT NOT NULL,
  ssga_fund_hist_id BIGINT NOT NULL,
  asof_calendar_day DATE,
  ssga_batch_base_id BIGINT NOT NULL,
  account_as_fund_flag VARCHAR(10) NOT NULL,
  fund_id BIGINT NOT NULL,
  portia_alias VARCHAR(13),
  prks_alias VARCHAR(13),
  aladdin_alias VARCHAR(13),
  champs_alias VARCHAR(13),
  accounting_system VARCHAR(255),
  cost_center VARCHAR(255),
  fund_domicile VARCHAR(255),
  legal_name VARCHAR(255),
  legal_type VARCHAR(100),
  management_location VARCHAR(255),
  market_effect_eligibility VARCHAR(100),
  opening_frequency VARCHAR(100),
  portfolio_type VARCHAR(100),
  portfolio_type_sub_class VARCHAR(100),
  region VARCHAR(255),
  selection_strategy VARCHAR(255),
  strategy VARCHAR(255),
  structure VARCHAR(100),
  subadvisor VARCHAR(255),
  subadvisory VARCHAR(100),
  commencement_op_calendar_day DATE,
  start_calendar_day DATE,
  stop_calendar_day DATE,
  trading_start_calendar_day DATE,
  trading_stop_calendar_day DATE,
  termination_calendar_day DATE,
  active_sel_approach VARCHAR(255),
  alt_sub_asset_type VARCHAR(100),
  asset_class VARCHAR(100),
  asset_source VARCHAR(255),
  company_stock VARCHAR(255),
  advisory_bool BOOLEAN,
  currency_sector VARCHAR(100),
  duration VARCHAR(100),
  hedge_ast_mgmt_source VARCHAR(255),
  hedge_ast_mgmt_source_code VARCHAR(20),
  inv_approach VARCHAR(255),
  inv_country_code VARCHAR(50),
  inv_region VARCHAR(255),
  inv_style VARCHAR(100),
  inv_subregion VARCHAR(255),
  market_cap VARCHAR(100),
  nav_subattr_type VARCHAR(100),
  nav_type VARCHAR(100),
  product_strategy VARCHAR(255),
  sector_fi VARCHAR(100),
  style VARCHAR(100),
  underlying VARCHAR(100),
  underlying_code VARCHAR(20),
  traded_on_exchange_flag VARCHAR(50),
  isg_managed_bool BOOLEAN,
  fund_group VARCHAR(255),
  fund_group_type VARCHAR(100),
  sub_advised_flag VARCHAR(5),
  corporate_action_system_flag VARCHAR(5),
  do_not_invest_accrued_income_flag VARCHAR(5),
  do_not_invest_disinvest_fx_for_flag VARCHAR(5),
  do_not_invest_paid_income_flag VARCHAR(5),
  fx_fund_trading_strategy_flag VARCHAR(5),
  fx_trading_type_eligible_flag VARCHAR(5),
  internal_crossing_eligible_flag VARCHAR(5),
  ipo_eligible_flag VARCHAR(5),
  latent_zero_sentinel_eligible_flag VARCHAR(5),
  proxy_voting_discretion_flag VARCHAR(5),
  securities_lending_status_flag VARCHAR(50),
  soft_commission_eligible_flag VARCHAR(5),
  ssga_fm_cta_client_sma_only_flag VARCHAR(5),
  trade_order_routing_flag VARCHAR(5),
  value_reported_to_aum_flag VARCHAR(5),
  nsrd_fund_alias VARCHAR(13),
  corporate_bool VARCHAR(5),
  long_short_bool VARCHAR(5),
  inv_grade_bool VARCHAR(5),
  synthetic_exposure_over_90_bool VARCHAR(5),
  portfolio_manager VARCHAR(255),
  registration_flag VARCHAR(255),
  traded_on_exchange VARCHAR(50),
  legal_type_subclassification VARCHAR(50),
  select_concentrated VARCHAR(20),
  temc VARCHAR(20),
  ldi VARCHAR(20),
  exposure_management VARCHAR(20),
  currency_hedged VARCHAR(20),
  benchmark_code VARCHAR(100),
  benchmark_name VARCHAR(100),
  lqr_fund_cluster VARCHAR(100),
  fund_proxy_account_id BIGINT,
  custody_alias VARCHAR(13),
  isin_alias VARCHAR(13),
  ticker_alias VARCHAR(13),
  effective_timestamp TIMESTAMP NOT NULL DEFAULT CAST(FROM_UTC_TIMESTAMP(CURRENT_TIMESTAMP(), 'UTC') AS TIMESTAMP),
  aggressiveness VARCHAR(100),
  active_sel_approach_code VARCHAR(20),
  alt_sub_asset_type_code VARCHAR(20),
  approach VARCHAR(255),
  approach_code VARCHAR(20),
  asset_class_code VARCHAR(20),
  asset_source_code VARCHAR(20),
  company_stock_code VARCHAR(20),
  currency_hedged_bool BOOLEAN,
  currency_sector_code VARCHAR(20),
  duration_code VARCHAR(20),
  exposure_management_bool BOOLEAN,
  inv_approach_code VARCHAR(20),
  inv_country VARCHAR(255),
  inv_region_code VARCHAR(20),
  inv_style_code VARCHAR(20),
  inv_subregion_code VARCHAR(20),
  market_cap_code VARCHAR(20),
  nav_subattr_type_code VARCHAR(20),
  nav_type_code VARCHAR(20),
  product_strategy_code VARCHAR(20),
  sector_fi_code VARCHAR(20),
  style_code VARCHAR(20),
  syn_exp_bool BOOLEAN,
  temc_bool BOOLEAN,
  advisory VARCHAR(20),
  isg_managed_flag VARCHAR(80),
  contracting_entity VARCHAR(255),
  accounting_currency VARCHAR(4),
  lei VARCHAR(20),
  proxy_account_prks_alias VARCHAR(13),
  registration_type VARCHAR(255),
  nsrd_fund_alias_start_day DATE,
  nsrd_fund_alias_stop_day DATE,
  portia_alias_start_day DATE,
  portia_alias_stop_day DATE,
  prks_alias_start_day DATE,
  prks_alias_stop_day DATE,
  custody_alias_start_day DATE,
  custody_alias_stop_day DATE,
  isin_start_day DATE,
  isin_stop_day DATE,
  ticker_start_day DATE,
  ticker_stop_day DATE,
  aladdin_alias_start_day DATE,
  aladdin_alias_stop_day DATE,
  champs_alias_start_day DATE,
  champs_alias_stop_day DATE,
  caca_alias VARCHAR(13),
  caca_alias_start_day DATE,
  caca_alias_stop_day DATE,
  future_clearing_broker VARCHAR(255),
  future_clearing_broker_parent VARCHAR(255),
  futures_clearing_account VARCHAR(255),
  ssga_data_source_base_id BIGINT NOT NULL,
  synthetic_fund_alias VARCHAR(100),
  synthetic_fund_id BIGINT,
  fund_range VARCHAR(255),
  custodian VARCHAR(1000),
  prime_broker VARCHAR(255),
  ifast_alias VARCHAR(13),
  ifast_alias_start_day DATE,
  ifast_alias_stop_day DATE
)
DISTSTYLE=KEY
DISTKEY=SSGA_fund_base_id;

CREATE TABLE IF NOT EXISTS dim_ssga_security (
  ssga_security_hist_id BIGINT NOT NULL,
  ssga_security_base_id BIGINT NOT NULL,
  ssga_batch_base_id BIGINT NOT NULL,
  ssga_security_id INT NOT NULL,
  accrued_factor DECIMAL(18, 8),
  asset_type VARCHAR(28),
  amount_issued DECIMAL(30, 12),
  callable_flag VARCHAR(1),
  convertible_flag VARCHAR(1),
  collateral_type VARCHAR(40),
  country_of_issuer_iso_code VARCHAR(60),
  country_of_risk_iso_code VARCHAR(60),
  coupon_rate DECIMAL(20, 4),
  coupon_type VARCHAR(24),
  cusip VARCHAR(40),
  dbrs_rating VARCHAR(12),
  expected_maturity_calendar_day TIMESTAMP,
  fitch_lt_mmkt_rating VARCHAR(20),
  fitch_lt_rating VARCHAR(20),
  fitch_lt_rating_calendar_day TIMESTAMP,
  fitch_lt_rating_source VARCHAR(20),
  fitch_lt_rating_type VARCHAR(600),
  fitch_prog_mmkt_rating VARCHAR(20),
  fitch_st_mmkt_rating VARCHAR(20),
  fitch_st_rating VARCHAR(20),
  fitch_st_rating_calendar_day TIMESTAMP,
  fitch_st_rating_source VARCHAR(20),
  fitch_st_rating_type VARCHAR(600),
  floater_flag VARCHAR(1),
  fund_typ VARCHAR(40),
  gics_industry_group_code VARCHAR(40),
  gics_industry_group_name VARCHAR(60),
  gics_sector_code VARCHAR(40),
  gics_sector_name VARCHAR(60),
  gics_industry_code VARCHAR(40),
  gics_industry_name VARCHAR(60),
  gics_sub_industry_code VARCHAR(40),
  gics_sub_industry_name VARCHAR(60),
  immediate_parent_id VARCHAR(255),
  immediate_parent_name VARCHAR(100),
  industry_group VARCHAR(24),
  industry_sector VARCHAR(24),
  industry_subgroup VARCHAR(30),
  internal_security_id_mdf BIGINT,
  internal_security_id_gcdf DECIMAL(38, 0),
  internal_security_id_idr DECIMAL(38, 0),
  internal_security_id_fa VARCHAR(20),
  isin VARCHAR(40),
  issue_calendar_day TIMESTAMP,
  issuer_id BIGINT,
  issuer_industry VARCHAR(16),
  issuer_name VARCHAR(128),
  last_refix_calendar_day TIMESTAMP,
  market_sector_description VARCHAR(6),
  maturity_calendar_day TIMESTAMP,
  moodys_lt_mmkt_rating VARCHAR(20),
  moodys_lt_rating VARCHAR(20),
  moodys_lt_rating_calendar_day TIMESTAMP,
  moodys_lt_rating_source VARCHAR(20),
  moodys_lt_rating_type VARCHAR(600),
  moodys_prog_mmkt_rating VARCHAR(20),
  moodys_st_mmkt_rating VARCHAR(20),
  moodys_st_rating VARCHAR(20),
  moodys_st_rating_calendar_day TIMESTAMP,
  moodys_st_rating_source VARCHAR(20),
  moodys_st_rating_type VARCHAR(600),
  mortgage_credit_provider VARCHAR(8),
  mortgage_series VARCHAR(8),
  mortgage_servicer VARCHAR(4000),
  next_call_calendar_day TIMESTAMP,
  next_payment_calendar_day TIMESTAMP,
  next_put_calendar_day TIMESTAMP,
  next_reset_calendar_day TIMESTAMP,
  outstanding_amount DECIMAL(30, 12),
  par_amount DECIMAL(38, 14),
  putable_flag VARCHAR(1),
  pv_asset_class VARCHAR(255),
  pv_sector VARCHAR(80),
  pv_sector_detail VARCHAR(80),
  sp_lt_watchlist_direction VARCHAR(20),
  sp_lt_watchlist_timestamp TIMESTAMP,
  sp_st_watchlist_direction VARCHAR(20),
  sp_st_watchlist_timestamp TIMESTAMP,
  fitch_lt_watchlist_direction VARCHAR(20),
  fitch_lt_watchlist_timestamp TIMESTAMP,
  fitch_st_watchlist_direction VARCHAR(20),
  fitch_st_watchlist_timestamp TIMESTAMP,
  moodys_lt_watchlist_direction VARCHAR(20),
  moodys_lt_watchlist_timestamp TIMESTAMP,
  moodys_st_watchlist_direction VARCHAR(20),
  moodys_st_watchlist_timestamp TIMESTAMP,
  portia_key VARCHAR(40),
  refix_frequency VARCHAR(30),
  remaining_maturity DECIMAL(30, 12),
  repo_collateral_name VARCHAR(60),
  repo_collateral_type VARCHAR(20),
  repo_ext_calendar_day TIMESTAMP,
  repo_open_flag VARCHAR(20),
  reset_index VARCHAR(15),
  sec_days VARCHAR(20),
  security_description VARCHAR(600),
  security_type VARCHAR(32),
  sector VARCHAR(30),
  subsector VARCHAR(30),
  sp_lt_mmkt_rating VARCHAR(20),
  sp_lt_rating VARCHAR(20),
  sp_lt_rating_calendar_day TIMESTAMP,
  sp_lt_rating_source VARCHAR(20),
  sp_lt_rating_type VARCHAR(600),
  sp_prog_mmkt_rating VARCHAR(20),
  sp_st_mmkt_rating VARCHAR(20),
  sp_st_rating VARCHAR(20),
  sp_st_rating_calendar_day TIMESTAMP,
  sp_st_rating_source VARCHAR(20),
  sp_st_rating_type VARCHAR(600),
  sponsor VARCHAR(80),
  ultimate_parent_name VARCHAR(100),
  ultimate_parent VARCHAR(255),
  yield_to_maturity DECIMAL(18, 7),
  underlying_type VARCHAR(20),
  underlying_ssga_security_id VARCHAR(40),
  report_timestamp TIMESTAMP,
  swap_type VARCHAR(15),
  pay_leg_currency VARCHAR(10),
  rec_leg_currency VARCHAR(10),
  pay_leg_float_rate_ref VARCHAR(45),
  rec_leg_float_rate_ref VARCHAR(45),
  rec_leg_type VARCHAR(20),
  rec_leg_fixed_rate DECIMAL(38, 16),
  pay_leg_type VARCHAR(20),
  pay_leg_fixed_rate DECIMAL(38, 16),
  product_type VARCHAR(20),
  otc_original_counterparty VARCHAR(45),
  otc_start_timestamp TIMESTAMP,
  otc_end_timestamp TIMESTAMP,
  pay_leg_spread DECIMAL(30, 12),
  pay_leg_rolling_period_count INT,
  pay_leg_rolling_period_unit VARCHAR(10),
  pay_leg_day_count VARCHAR(15),
  pay_leg_reset_period_count INT,
  pay_leg_reset_period_unit VARCHAR(10),
  pay_leg_reset_type VARCHAR(15),
  rec_leg_spread DECIMAL(30, 12),
  rec_leg_rolling_period_count INT,
  rec_leg_rolling_period_unit VARCHAR(10),
  rec_leg_day_count VARCHAR(15),
  rec_leg_reset_period_count INT,
  rec_leg_reset_period_unit VARCHAR(10),
  rec_leg_reset_type VARCHAR(15),
  used_price_end DECIMAL(38, 16),
  base_index VARCHAR(45),
  base_index_type VARCHAR(30),
  base_index_value DECIMAL(30, 12),
  traded_fixed_rate DECIMAL(30, 12),
  otc_traded_backend_notional DECIMAL(30, 12),
  otc_traded_frontend_notional DECIMAL(30, 12),
  otc_contract_size DECIMAL(38, 16),
  repo_notice_period_count INT,
  repo_notice_period_unit VARCHAR(10),
  strike_price DECIMAL(30, 12),
  sec_id VARCHAR(30),
  private_placement_flag VARCHAR(1),
  guarantor_id VARCHAR(255),
  coupon_currency_iso_code VARCHAR(4),
  coupon_payment_frequency BIGINT,
  expiration_timestamp TIMESTAMP,
  optn_id VARCHAR(40),
  shares_outstanding DECIMAL(38, 6),
  bb_security_id VARCHAR(30),
  not_in_stage_bool BOOLEAN,
  flag_144a VARCHAR(1),
  is_reg_s VARCHAR(1),
  inflation_linked_indicator VARCHAR(1),
  type_of_bond VARCHAR(100),
  future_category VARCHAR(100),
  cadis_system_uptimestampd TIMESTAMP,
  effective_timestamp TIMESTAMP NOT NULL DEFAULT CAST(FROM_UTC_TIMESTAMP(CURRENT_TIMESTAMP(), 'UTC') AS TIMESTAMP),
  final_maturity_date DATE,
  prks VARCHAR(40),
  mch_id VARCHAR(40),
  bb_id VARCHAR(40),
  future_first_trade_date DATE,
  next_call_price DECIMAL(22, 6),
  next_put_price DECIMAL(22, 6),
  floater_spread DECIMAL(12, 3),
  future_contract_size DECIMAL(18, 2),
  future_first_delivery_date DATE,
  future_last_delivery_date DATE,
  gcdf_application_key VARCHAR(30),
  clearing_exchange_code VARCHAR(39),
  cins VARCHAR(40),
  future_ric_root VARCHAR(40),
  alt_root_alias VARCHAR(40),
  executing_broker VARCHAR(45)
)
DISTSTYLE=KEY
DISTKEY=SSGA_security_base_id;

CREATE TABLE IF NOT EXISTS dim_ssga_security_exchange (
  ssga_security_exchange_hist_id BIGINT NOT NULL,
  ssga_security_exchange_base_id BIGINT NOT NULL,
  ssga_batch_base_id BIGINT NOT NULL,
  issue_id BIGINT NOT NULL,
  ssga_security_id INT,
  issue_currency_iso_code VARCHAR(4),
  sedol VARCHAR(40),
  country_of_trading_iso_code VARCHAR(50),
  primary_exchange_flag CHAR(1),
  mic_code VARCHAR(50),
  rks_key VARCHAR(40),
  ric VARCHAR(40),
  ticker VARCHAR(40),
  id_bb_unique VARCHAR(40),
  not_in_stage_bool BOOLEAN,
  cadis_system_updated TIMESTAMP NOT NULL,
  id_bb_global VARCHAR(50),
  composite_id_bb_global VARCHAR(50),
  exch_code VARCHAR(20),
  effective_timestamp TIMESTAMP NOT NULL DEFAULT CAST(FROM_UTC_TIMESTAMP(CURRENT_TIMESTAMP(), 'UTC') AS TIMESTAMP)
)
DISTSTYLE=KEY
DISTKEY=SSGA_security_exchange_base_id;